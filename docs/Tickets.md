üìã Divis√£o de Tarefas (Tickets) - IA SDR Imobili√°rioProjeto: IA SDR Imobili√°rio (Assistente WhatsApp + CRM)Fase: MVP (Produto M√≠nimo Vi√°vel)üèóÔ∏è √âpico 1: Setup e Infraestrutura BaseObjetivo: Ter o esqueleto do projeto rodando localmente e o banco de dados pronto na nuvem.[ ] TKT-001: Inicializar o projeto Next.jsDescri√ß√£o: Criar o reposit√≥rio base usando o Next.js App Router.Tarefas:Rodar npx create-next-app@latest (TypeScript, Tailwind, App Router).Limpar o boilerplate padr√£o (arquivos page.tsx e globals.css).Inicializar o shadcn/ui (npx shadcn-ui@latest init).[ ] TKT-002: Configurar Supabase e Banco de DadosDescri√ß√£o: Criar o projeto no Supabase e rodar as migra√ß√µes.Tarefas:Criar projeto no Supabase.Pegar as chaves de API (NEXT_PUBLIC_SUPABASE_URL e NEXT_PUBLIC_SUPABASE_ANON_KEY) e colocar no .env.local.Executar o script SQL do arquivo DATABASE-MODEL.md no SQL Editor do Supabase para criar as tabelas e pol√≠ticas RLS.[ ] TKT-003: Instalar depend√™ncias coreDescri√ß√£o: Adicionar as libs essenciais que usaremos.Tarefas:Instalar @supabase/ssr e @supabase/supabase-js.Instalar OpenAI SDK (npm i openai).Instalar componentes base do shadcn (button, input, card, badge, dialog).üîí √âpico 2: Autentica√ß√£oObjetivo: O corretor precisa conseguir fazer login para ver seu pr√≥prio Kanban.[ ] TKT-004: Criar p√°gina de Login/SignupDescri√ß√£o: Uma tela simples de autentica√ß√£o (rota /login).Tarefas:Criar formul√°rio de login via Google OAuth (ou Magic Link para facilitar).Conectar com a fun√ß√£o signInWithOAuth ou signInWithOtp do Supabase.[ ] TKT-005: Middleware de Prote√ß√£o de RotasDescri√ß√£o: Impedir que usu√°rios n√£o logados acessem o dashboard.Tarefas:Criar middleware.ts na raiz.Verificar sess√£o do Supabase; se n√£o tiver, redirecionar /dashboard/* para /login.üè¢ √âpico 3: Base de Conhecimento (Im√≥veis)Objetivo: O corretor precisa cadastrar as informa√ß√µes dos im√≥veis para a IA saber o que responder.[ ] TKT-006: Layout Base do Dashboard (UI)Descri√ß√£o: O "shell" da aplica√ß√£o (Sidebar e Header).Tarefas:Criar menu lateral com links: "Kanban (Leads)" e "Meus Im√≥veis".Exibir o nome do corretor logado e bot√£o de Sair.[ ] TKT-007: CRUD de Im√≥veisDescri√ß√£o: Rota /dashboard/imoveis para listar, criar e editar im√≥veis.Tarefas:UI: Tabela ou grid de cards listando os im√≥veis do corretor.Modal/Form: Formul√°rio com os campos: T√≠tulo, Descri√ß√£o para IA (text area grande), Link do an√∫ncio e Toggle "Ativo".A√ß√£o: Salvar no Supabase (tabela imoveis) atrelado ao corretor_id.üóÇÔ∏è √âpico 4: O Kanban (UI e Leads)Objetivo: A tela principal onde o corretor vai passar o dia gerenciando os contatos.[ ] TKT-008: Construir a UI do KanbanDescri√ß√£o: Rota /dashboard/leads (Home do painel).Tarefas:Criar 4 colunas est√°ticas: Novos, Qualificados, Em Atendimento, Perdidos.Criar o componente do "Card de Lead" (Mostra Nome/Telefone, badges de Or√ßamento/Urg√™ncia).[ ] TKT-009: Listagem e Atualiza√ß√£o de Status dos LeadsDescri√ß√£o: Buscar do Supabase e permitir mover de coluna.Tarefas:Buscar registros da tabela leads onde corretor_id seja o usu√°rio logado.Distribuir os cards nas colunas corretas baseado no status_kanban.Adicionar bot√µes no card para "Mover para Qualificado", etc (ou drag and drop b√°sico usando @hello-pangea/dnd ou apenas bot√µes no MVP para ser mais r√°pido).[ ] TKT-010: Detalhes do Lead (Sidebar ou Modal)Descri√ß√£o: Ao clicar num card do Kanban, abre os detalhes.Tarefas:Exibir dados do lead.Bot√£o toggle: "Pausar IA" (atualiza o campo ia_pausada para true/false no Supabase).Mostrar hist√≥rico de mensagens da tabela mensagens.ü§ñ √âpico 5: O Motor (Webhook WhatsApp + IA)Objetivo: O core do produto. Onde a m√°gica do bot acontece no backend.[ ] TKT-011: Webhook para Receber Mensagens (API Route)Descri√ß√£o: Rota /api/webhook/whatsapp para receber o POST do provedor (Meta ou Z-API).Tarefas:Receber o payload (telefone do lead, texto da mensagem).Verificar se o lead j√° existe na tabela leads (usando o n√∫mero do corretor + telefone do lead). Se n√£o, criar como "Novo".Salvar a mensagem na tabela mensagens (role: 'user').Verificar se ia_pausada √© true. Se for, ignora e retorna 200 OK. Se false, envia para a fila/chamada da IA.[ ] TKT-012: O C√©rebro da IA (OpenAI Integration)Descri√ß√£o: A l√≥gica que pega a mensagem e gera a resposta + qualifica√ß√£o.Tarefas:Buscar os imoveis ativos do corretor para montar o "Contexto".Buscar as √∫ltimas N mensagens daquele lead para a IA ter "Mem√≥ria".Montar o System Prompt (instru√ß√µes de como a IA deve agir e o que perguntar).Fazer chamada √† API da OpenAI (recomendado: usar Structured Outputs / Function Calling para a IA retornar um JSON no formato: { resposta: "texto", extraiu_orcamento: "500k", extraiu_urgencia: "1 m√™s", intencao: "compra" }).[ ] TKT-013: Atualizar Lead e Responder via WhatsAppDescri√ß√£o: Fechar o ciclo ap√≥s a resposta da IA.Tarefas:Salvar a resposta da IA na tabela mensagens (role: 'assistant').Disparar a requisi√ß√£o HTTP para a API do WhatsApp para enviar a mensagem de volta pro lead.Se o JSON da IA trouxer os dados extra√≠dos (orcamento, urgencia), atualizar a tabela leads no banco.Se a IA identificar que terminou de qualificar, mudar o status_kanban de 'novo' para 'qualificado'.üöÄ √âpico 6: Finaliza√ß√£o e Lan√ßamentoObjetivo: Garantir que tudo funcione bem junto e subir para produ√ß√£o.[ ] TKT-014: Landing Page M√≠nimaDescri√ß√£o: P√°gina p√∫blica focada em captar os primeiros corretores (rota /).Tarefas:Implementar a p√°gina baseada no documento LANDING-PAGE-SPEC.md.Adicionar bot√£o que leva para /login.[ ] TKT-015: Deploy e Testes Ponta a PontaDescri√ß√£o: Colocar o app online na Vercel.Tarefas:Subir o c√≥digo pro GitHub e linkar na Vercel.Configurar as vari√°veis de ambiente de produ√ß√£o (Supabase Prod, OpenAI API Key, WhatsApp Tokens).Fazer um teste real enviando mensagem do seu celular para o n√∫mero conectado e ver a m√°gica do Kanban funcionar em tempo real.
